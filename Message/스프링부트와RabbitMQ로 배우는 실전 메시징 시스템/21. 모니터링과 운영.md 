무엇을 모니터링 해야하는가?

- RabbitMQ 브로커 자체의 상태
    - 서버 리소스: 메모리량을 계속해서 추적
    - 연결 및 채널 수: 이 수치가 급증한다면 연결 누수를 의심
    - 소켓 및 파일 디스크립터: 운영체제가 허용하는 한계치에 가까워지는지 확인
- 메시지 흐름 및 큐의 상태
    - Ready: 큐에 쌓여있지만 아직 컨슘 되지 않은 메시지의 수
    - Unacked: 컨슘에 전달되었지만 아직 ACK/NACK 응답을 받지 못한 메시지의 수. 
- 메시지 처리량
    - Published Rate: 초당 메시지 발행량
    - Delivered Rate: 초당 큐에서 컨슈머로 전달되는 메시지의 수
    - Consumer 수: 각 큐에 연결된 컨슈머 수
    - ACK/NACK 비율: NACK비율이 높다면 컨슘 로직 에러 예상

이후에는 그라파나, 프로메테우스를 통한 모니터링 연동

-----

클러스터링을 하다보면 고가용성을 따지게 될 때가 있는데, 그렇게 되면 클래식큐만으로는 한계가 있을 수 있다. 이를 발전하고자 미러큐와 쿼럼큐가 나왔는데

RabbitMQ는 쿼럼큐 사용을 권장한다. 여담이지만.. 근데 팀 사람들은 싫어한다! .. ㅠ

