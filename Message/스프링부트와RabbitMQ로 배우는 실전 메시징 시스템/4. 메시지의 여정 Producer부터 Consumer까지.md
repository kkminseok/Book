- Producer는 메시지를 발송하는 주체를 의미한다.
- 메시지는 AMQP에서 두 부분으로 구성된 구조적 데이터이다.
    - 페이로드(Payload)
        - Message Body. 실제로 전달하고 싶은 데이터 본문(Json,XML,Protocol Buffers, ...)
    - 속성(Properties / Headers)
        - 메타데이터를 담고 있는 부분. (content_type, encoding, ...)
- Consumer는 메시지를 받아 비즈니스 로직을 수행하는 주체를 의미
    - 메시지를 소비하는데에는 2가지 방식이 있다.
    - 폴링(Polling) / Pull 방식
        - Consumer가 주기적으로 계속해서 브로커에게 메시지 여부를 확인하는 방식. `basic.get`이라는 AMQP 명령어 사용
        - 폴링방식이 가지고 있는 일반적인 장,단점 가지고 있음.
    - 푸시(Push 방식)
        - 브로커가 새로운 메시지를 구독하고 있는 Consumer에게 메시지를 '밀어주는'방식'. `basic.consume`이라는 AMQP라는 명령어 사용. 대부분 이 방식을 사용
        - 폴링방식의 단점 보완, 메시지 전달 속도가 너무 빠르면 과부하 우려
- ACK라는 확인 응답을 통해 메시지 유실성을 어느정도 보장해줌
    - Consumer가 큐에서 메시지를 가져갔는데 로직 처리 중 예외가 발생하거나 프로세스가 죽어버리면 브로커는 일정시간 ACK를 Consumer에서 못 받았기 때문에 해당 메시지를 큐 맨 앞 또는 뒤로 되돌려 놓는다. 다른 Consumer가 이를 처리한다.
    - ack를 어떻게 처리할 것인지(자동,수동) / 실패한 메시지를 어떻게 다룰 것인지(DLQ)은 뒤에 나온다.
- 큐(Queue)는 FIFO의 원칙을 따르는 자료구조
    - durable(영속성): 이 옵션을 지니고 있으면 큐의 메타데이터가 디스크에 저장되어, 브로커 재시작시에도 남아있음. `false`로 해놓으면 메모리에만 큐가 존재하게 됨.
    - Exclusive(베타성): 이 옵션을 `true`로 해놓으면 이 큐를 처음 선언한 연결에서만 접근 가능. 연결이 끊어지면 큐는 자동 삭제됨. (임시큐에 사용됨)
    - Auto-delete: 이 옵션을 지니고 있으면 마지막 Consumer가 구독취소를 하면 큐가 자동으로 삭제됨.
    - Arguments: `x-`접두사로 시작하는 추가적인 옵션을 설정할 수 있음.
        - `x-message-ttl`: ttl설정
        - `x-max-length`: 큐가 보관할 수 있는 최대 메시지 개수 제한
        - `x-max-lenght-bytes`: 큐가 보관할 수 있는 메시지의 총 바이트 크기
        - `x-dead-letter-exchange`: 메시지가 폐기될 때 자동으로 보내질 Dead Letter Exchange를 지정

- RabbitMQ는 하나의 큐에 여러 Consumer가 붙어있으면 그 Consumer들에 대해서 **라운드 로빈(Round-robin)** 방식으로 하나씩 분배해준다.

