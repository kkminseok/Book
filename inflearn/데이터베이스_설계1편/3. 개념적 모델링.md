개념적 모델링을 진행할 때, 여러 요구사항에서 '명사'와 '동사'에 집중하면 데이터로 뽑아내기 더 수월할 수 있다.

- 명사: 데이터, 엔티티(Entity)가 지닐 속성(Attribute)이 될 확률이 높다.
- 동사: 데이터들 사이의 행위나 관계, 관계(Relationship)가 될 확률이 높다.

근데 '주문'같은 것은 명사라고 하기 좀 애매한 부분이 있다. 핵심은 **시스템이 정보를 저장하고 관리해야 할 대상**을 찾아야한다.

명사와 동사로 분류해보고, 동사가 '관리해야 할 기록이나 증빙을 남기는가?'에 대한 질문을 해보자.
남긴다하면 그건 엔티티가 될 확률이 높다.

-----

엔티티란 '저장할만한 가치가 있는 모든 정보를 의미. 유무형이다'

좋은 엔티티의 특성

- 업무 관련성
    - 당연하겠지만 업무에서 사용되어야함.
- 식별 가능해야함.
    - 엔티티라는 데이터는 서로 명확하게 구별 가능해야함.
- 두 개 이상의 정보를 가짐.
    - 단 하나의 정보를 가지고 있다면 다른 엔티티의 속성일 가능성이 있다.
- 인스턴스(Instance)의 집합이다.
    - 실제 데이터(인스턴스)의 집합체
- 다른 엔티티와 관계를 맺는다.
    - 회원은 주문을 하고,.. 이런 관계

과도한 설계는 오버엔지니어링이다.

-----

엔티티는 크게 3개로 나뉠 수 있음.

- 유형 엔티티
    - 물리적 형태가 존재
- 개념 엔티티
    - 물리적인 형태는 없음.
    - 부서, 조직, 팀, 계좌 등..
    - 비즈니스 프로세스에 대한 이해가 필요.
- 사건 엔티티
    - 시간이 지남에 따라 데이터가 지속적으로 누적되는 특지을 가지는 것.
    - 업무 수행에 따라 발생하는 행위 기록
    - 결제, 입금, 출금 등..

사건 엔티티는 폭발적으로 증가할 가능성이 존재하므로, 인덱스 전략/ 데이터 파티셔닝 아카이빙 등에 사용할 수 있다.

엔티티는 또 3가지 종류로 나뉠 수 있다.

- 기본 엔티티
    - 독립적 생성 가능, 주로 부모 역할
    - 회원, 상품
- 중심 엔티티
    - 기본 엔티티가 어떤 행위를 통해 만들어낸 엔티티
    - 송금, 주문, 계약
- 행위 엔티티
    - 업무가 흘러가면서 생성되는 상세 정보 기록되는 엔티티
    - 주문 이력, 결제 내역, 로그, 등

이렇게 나누는 이유는, 원할한 커뮤니케이션을 위해서도 있고 일정관리에서도 이를 기준으로 나누기 쉽기 때문이다.

하지만 실무에서는 이런 얘기 안 하므로, 사고의 틀의 기반을 마련해주므로 이를 기준으로 엔티티를 사고하는 방식을 연습하고 가져가보자.

-----

- 강한 엔티티: 독립적으로 존재할 수 있는 엔티티
    - 사원, 고객, 상품, 부서,...
- 약한 엔티티: 다른 엔티티가 존재하지 않으면 독립적으로 존재할 수 없는 종속적인 엔티티
    - 회사 '사원'이 가지고 있는 '부양 가족', ..

이렇게 구분하는 이유는 만약 부모의 식별자를 자식이 포함하지 않으면, 고아 데이터가 생길 수 있다. 자식 데이터로 무언가 해야할 때 어떤 기준으로 잡아야할 지 모르는 등의 문제가 생긴다.

예를 들어서 특정 사원의 부양가족의 연말 정산 혜택을 제공해야할 때 고아 데이터가 존재하면 어떤 자식의 부양가족인지 알 수가 없다. 

약한 엔티티 관계를 논리적 모델링 단계에서는 **식별 관계**라고 한다. 최근에는 근데 **비식별 관계**라는 방법을 주로 사용한다.

- 연관 엔티티: 두 개 이상의 엔티티 간에 발생하는 특정 사건, 행위, 계약 등을 표현하기 위해 사용되는 엔티티
- 슈퍼타입/서브타입 엔티티:  객체지향 프로그래밍의 상속 개념과 매우 유사함. 
    - 슈퍼타입: 그룹 내 모든 엔티티들이 공통적으로 가지는 속성과 관계를 정의하는 상위 엔티티
    - 서브타입: 슈퍼 타입으로부터 공통 속성을 상속받고, 자신만의 고유한 속성이나 관계를 추가로 가지는 하위 엔티티.
    - 예시로 사원은 슈퍼타입으로, 정규직과 인턴 사원은 서브타입으로 나눌 수 있다.
뒤에서 자세히 나올 것.

-----

- 속성: 엔티티가 가지는 구체적인 특성이나 정보
    - 이메일, 주소 등
- 식별자: 속성 중에서 아주 특별한 역할을 하는 속성
    - 엔티티를 식별할 수 있는 속성
    - 회원 아이디, 상품 코드, 주문 번호

-----

관계 사이의 규칙을 정의해야하는데, 이 관계의 규칙을 정의하는 데에 두 가지 핵심 요소가 있다.

- 카디널리티
    - 일대일, 일대다, 다대일, 다대다
- 참여도
    - 엔티티의 인스턴스가 관계에 반드시 참여해야 하는지(필수), 아니면 참여하지 않을 수도 있는지(선택)인지 를 결정

개념적 모델링에서는 관계형 데이터베이스에 종속적인 외래키 개념이 존재하지 않아서 외래키 값을 ERD모델에 포함하지 않는다.
실무에서는 그냥 넣는 경우도 있다.

이 챕터 내용은 알고 있기에 많이 정리하지는 않는다.

-----

- 까마귀발 표기법, 첸 표기법에 대한 설명 

이미 알고 있는 내용들 이므로 내용추가하지 않음.

-----

다대다 방식의 관계는 한 테이블에서 해결할 수 없다. 두 테이블로 해결하는건 안티패턴에 가까운 방법들만 제시될 수 있다.

컬럼을 추가하거나, 리스트 형태로 넣거나 하는 등으로 해결하려고 하면 검색의 문제도 있고, 원자성을 위반한다. 

이 문제를 해결하기 위해서는 이 관계를 엔티티로 **승격**하는 것이다. 이를 **연관 엔티티**라고 한다.

M:N의 관계는 1:N, N:1로 만들 수 있다.

실무팁은 M:N관계는 무조건 풀고, 연관 엔티티를 둬서 해결하도록하자. 연관 엔티티 기준으로 테이블을 만들게 되면 추가적인 속성이 필요할 수 있으니, 이를 추상화해보도록 하자.

-----

실무에서는 용어사전을 만드는 것을 추천한다.

예를 들어 고객을 'user', 'customer', 'member'등 각 팀원마다 다르게 생각하고 있을 수 있는데, 이런 것을 하나로 통합해주는 용어사전이 있으면 좋다.

- 단일어를 중심으로 만들자. 복합어까지 포함하면 너무 커진다.
- 축약어를 남발하면 이해를 더 어렵게 만들 수 있기에 축약어 사전도 있으면 좋다.

강사님의 경험으로는 무조건 용어사전은 실시간 편집이 되는 곳을 사용하는것을 추천한다고 한다. 엑셀관리는 오히려 더 불편하다.

그리고 **용어 사전은 필수**라고 하신다.

회사에 적용해봐야지.

-----

## 총평

아직까지는 어렵지 않다면 용어가 너무 많다.

하지만 강의의 핵심은 용어를 외우는 것보다는 어떻게 사고하느냐를 아는게 중요하다고 하는 것 같다.
