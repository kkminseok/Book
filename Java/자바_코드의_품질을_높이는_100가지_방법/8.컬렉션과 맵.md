## [069] 관련 없는 객체 타입 검색

```java
@Test
@DisplayName("69 관련 없는 객체 타입 검색")
void unrelatedObjectTypeSearchTest() throws IOException {
    Set<File> allowedFiles = new HashSet<>();

    allowedFiles.contains(File.createTempFile("text", ".txt"));

    List<Short> shortList = new ArrayList<>();
    short s = 1;
    shortList.contains(s + 1); // <- Integer로 박싱됨
}
```

`contains()` 같은 함수의 인자는 모든 오브젝트를 받는데, 이렇듯 의도치않게 타입 안정성이 깨지는 경우를 의미한다.

- 유닛테스트를 진행한다.
- 박싱된 원시 타입 컬렉션을 지양하고, `FastUtil` 등의 라이브러리를 사용 고려해보자.

## [070] 단일 객체와 컬렉션 혼합

```java
List<Object> list = new ArrayList<>();

List<String> list2 = List.of("my", "name", "is");
list.add("one");
list.add("two");
list.add("three");


list.add(list2); // <-- 과연 의도한 것일까?
list.stream().forEach(System.out::println);
/*
one
two
three
[my, name, is]
*/
```

위의 코드처럼 `addAll()`을 써야할 곳을 잘 못 쓰거나 `Object` List 선언해서 컴파일 오류를 피해가는 실수들을 말한다.

- 가급적 Object형은 쓰지 않는다.
- 공통 인터페이로 빼거나 `sealed` 키워드를 사용하여 외부 구현을 금지 시킨다.

## [071] null을 허용하지 않는 컬렉션에서 null을 검색함.

검색할 때 null을 넣게하는 경우를 말하는데.. 이런 경우가 잘 있나?..

## [072] 맵에서 null값 사용

말그대로인데, 위험하니까 그냥 값에 null을 사용하지 말자

차라리 `Optional`을 사용해서 `Optional.empty()`로 저장하라고 한다.

## [073] 수정 불가 컬렉션의 수정 시도

수정불가한 컬렉션에 실수로 데이터를 추가하거나 하는 등의 작업을 할 경우가 있다. 눈에 바로 보이지 않고 함수로 감싸져있거나 하는 경우 실수할 경우가 높다. 

- 메서드가 반환한 컬렉션은 기본적으로 수정할 수 없다고 간주하고, 수정하려고 하지 않는다. 필요한 경우 복사본을 만든다.
- 불변성을 보장하는 구아바 컬렉션을 사용한다.

## [074] 가변 객체를 키로 사용
