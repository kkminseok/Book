## 사전 개념

- 데이터 병렬성: 하나의 일을 여러 프로세서(코어, 스레드)가 동시에 처리하는 방식
- 작업 병렬성: 서로 다른 작업을 여러 프로세서가 동시에 처리하는 방식

**암달의 법칙**이라는게 있는데, 이는 직렬로 실행해야할 부분(S)과 병렬로 실행해야할 부분(P)이 있고, 이 전체 시간은 T라고 했을 때 프로세서의 수 상관없이 전체 시간(T)는 결국 직렬로 실행해야하 부분(S)보다 작어질 수 없다는 것을 의미한다.
하지만 이러한 법칙으로 알 수 있는건 병렬처리 부분에 한해서 **무한한 성능 향상**이 가능하다는 것이다. 그렇지만 전제가 있다. 병렬처리로 하는 부분끼리 독립적으로 동작해야하고, 공유 상태나 데이터가 없어야한다는 것이다. 

책에서 동시성 예제를 보여주는데, 증감연산에 대한 문제 그런것 세간에 알려진 것을 다루므로 크게 다루지 않겠다.

## 자바 메모리 모델의 이해

자바 메모리 모델은 **약한 메모리 모델**을 채택하고 있다. 약한 메모리 모델이란 CPU 코어마다 서로 다른 값은 볼 수 있고, 한 프로세서가 데이터를 변경하더라도 다른 프로세서가 그 변경을 즉시 못 볼 수도 있고, 메모리 연산 순서가 보는곳마다 다를 수 있는 구조이다. 이렇게 보면 약한 메모리 모델이 별로 안 좋아보이지만, 반대로 모든 프로세서가 동일한 순서로 관찰하는 **강한 메모리 모델**은 성능 오버헤드가 너무 크다는 단점이 있다. 결국에는 분산 환경에서는 성능을 위해 대부분 약한 메모리 모델을 채택하고 있다.

옛날에는 자바에서 메모리 모델은 비동기화 접근에 대해서 어떠한 보장을 알아서 해주지 않기에 `synchronized`키워드를 통해 이를 개발자가 보장하도록 하였다.

- `synchronized`: 2가지 특징을 지니고 있다.
    - 상호배제: 이 키워드가 적용된 블록이나 메서드는 오직 하나의 스레드만이 접근할 수 있다.
    - 메모리 가시성: 블록이 종료하는 스레드는 해당 블록 내에서 발생한 모든 메모리 변경사항을 기록하고, 락을 해제한다. 반대로 블록에 진입하는 스레드는 락을 획득하기 전에 **메인 메모리에서 최신 값을 읽어와**자신의 캐시를 업데이트한다.
    