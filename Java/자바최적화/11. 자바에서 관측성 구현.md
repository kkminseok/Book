## 마이크로미터

마이크로미터는 자바 지표 라이브러리 중 하나이다. 

### 미터와 레지스트리

**미터**는 지표를 수집하는 인터페이스라고 볼 수 있는데, 이 인터페이스를 관리하는 곳을 **레지스트리**라 부른다.

대표적인 미터들은 다음과 같다.
- SimpleMeterRegistry: 인메모리에서만 유지되며, 개별 또는 단위 테스트에 사용됨.
- LoggingMeterRegistry: 개발 또는 테스트 용도로 사용됨. 주기적으로 미터 데이터를 로그로 출력
- CompositeMeterRegistry: 여러 개의 레지스트리를 포함할 수 있는 멀티퍼블리셔
- Metrics.globalRegistry: 정적 전역 레지스트리 <--???

마이크로미터는 자주 사용되는 계측기를 제공하고 있는데, 그 종류는 다음과 같다.

### 카운터

```java
    private final Counter counter;

    private final MeterRegistry meterRegistry;

    public CounterController(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
        this.counter = Counter.builder("my_counter")
                .description("A simple counter for demonstration")
                .register(meterRegistry);
    }

    @GetMapping("/increment")
    public String incrementCounter() {
        counter.increment();
        return "Counter incremented: " + counter.count();
    }
}
```

이런식으로 호출될때마다 카운팅 되는 카운터가 존재한다. 다만, 호출할 때마다 증가된 값을 바로 리턴하지는 않아서 JVM에 내부에서 값은 올리되, 외부에 보여줄때에는 주기에 맞춰서 값을 업데이트 하는 것 같다.


### 게이지

사실 이건 예제를 봐야 이해가 편하다.

[이 예제를 보는게 편하다](https://github.com/kkminseok/My-Spring-Test/tree/main/Spring-Observability/Spring-Micrometer-Test)






