자바9에서 새로 추가된 컬렉션 팩토리를 살펴볼 예정.

탄생배경은 자바8 기준으로 컬렉션을 만들려면 불변성을 지닌 객체로 생성되는데, 이는 요소를 추가허나 수정이 불가능하다는 불편함이 있음.

- 리스트 팩토리 메서드: List.of
- 집합, 맵 팩토리: Set.of, Map.of

리스트, 셋인터페이스에는 `removeIf`, `replaceAll`, `sort` 메서드가 추가됨. (이 메서드들은 새로운 배열을 만들지 않음.)

맵 인터페이스에서는 
- `forEach` 메서드가 추가됨.(귀찮게 Map.Entry안 써도됨) 
-  `getOrDefault`로 null 방지도 가능
- `computeIfAbsent` 제공된 키에 해당하는 값이 없으면, 키를 이용해 새 값을 계산하고 맵에 추가
- `computeIfPresent` 제공된 키가 존재하면 새 값을 계산하고 맵에 추가
- `compute` 제공된 키로 새 값을 계산하고 맵에 저장
- `remove` 한 번에 키에 있는 밸류 삭제 가능
- `replaceAll` 리스트의 replaceAll과 비슷하게 동작
- `replace` 키가 존재하면 맵을 바꿈. 
- `putAll` 두 맵을 합침
- `merge` 두 맵을 합칠 때 중복 키가 있으면 어떻게 할지 정하여 해결

```java
Map<String,String> family = Map.ofEntries(
        Map.entry("Teo", "Star Wars"),
        Map.entry("Cristina", "James Bond")
);
Map<String,String> friends = Map.ofEntries(
        Map.entry("Raphael", "Star Wars"),
        Map.entry("Cristina", "Matrix")
);
Map<String,String> everyOne = new HashMap<>(family);
friends.forEach((k,v) ->
        everyOne.merge(k,v, (movie1, movie2) -> movie1 + " & " + movie2));
System.out.println(everyOne);
```

맵 정렬은 여기에도 따로 적으면 좋을 것 같다

```java
Map<String, String> favouriteMovies = Map.ofEntries(Map.entry("Raphael", "Star Wars"),
        Map.entry("Cristina", "Matrix"),
        Map.entry("Olivia", "James Bond"));

favouriteMovies
        .entrySet()
        .stream()
        .sorted(Map.Entry.comparingByKey())
        .forEachOrdered(System.out::println); // 사람의 이름을 알파벳 순으로 스트림 요소 처리
```

-----

`ConcurrentHashMap`에 대한 이야기

스트림에서 봤던 것과 비슷한 종류의 세 가지 새로운 연산 지원

1. forEach: 각 쌍에 주어진 액션을 실행
2. reduce: 모든 쌍을 제공된 리듀스 함수를 이용해 결과로 합침
3. search: 널이 아닌 값을 반활할 때까지 각 쌍에 함수를 적용

외에도 키로 연산, 값으로 연산, 등등 지원한다.

## 총평

어렵지는 않았지만 이를 다 이해할 수 있을까. 자바독을 읽고 인터페이스를 이해하는 습관을 들여야겠다는 생각을 하였다.


