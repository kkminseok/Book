## 2. 자료형과 기능

### 주요 자료형
- String
- List
- Hash
- Set
- Sorted Set

### 보조 자료형/기능
- 비트맵
- 지리적 공간 인덱스
- Pub/Sub
- HyperLogLog
- 레디스 스트림

### 레디스 유틸리티 명령어
- KEYS(성능이 좋지는 않음, SCAN계열 사용 권장)
- EXISTS(존재여부)
- TYPE(자료형과 기능 확인)
- DEL(키 삭제)

### String형

- 문자열, 이진 데이터, 정수, 부동소수점 등 저장 가능.
- 세션캐시 등 활용
- SET/GET, MSET,MGET 명령어 
- 숫자값 저장했을 경우 `INCR` 명령어로 증가 가능

|숫자값이 아닌 경우|시간복잡도|효과|
|----|----|---|
|GET|O(1)| 키 값 가져오기
|SET|O(1)| 키 값 저장하기
|MGET|O(N)| 여러 키 값 가져오기
|MSET|O(N)| 여러 키 값 저장하기
|APPEND|O(1)| 키에 값 덮어쓰기
|STRLEN|O(1)|키 값 문자열 길이 반환
|GETRANGE|O(N)| 범위 지정 값 가져오기
|SETRANGE|O(1)|범위 지정 값 저장하기

 
|숫자값인 경우|시간복잡도|효과|
|----|----|---|
|INCR|O(1)|값 1증가
|INCRBY|O(1)| 지정한 값 만큼 증가
|INCRBYFLOAT|O(1)| 부동소수점을 지정한 값만큼 증가
|DECR|O(1)|값 1감소
|DECRBY|O(1)|값 지정한 수만큼 감소

그 외 `GETEX`(초 단위 실행 값 가져옴), `GETDEL`(값 가져오고 지움), `MSETNX`(여러 값 저장 이미 키 존재시 실패) 등이 있다.

- `SET` 명령어 참고할만한 옵션
    - EX/PX 옵션: 만료시간 설정
    - NX/XX 옵션: 키 존재여부에 따라 조건을 충족할 때 저장
    - KEEPTTL: TTL을 변경하지 않고 조작
    - EXAT/PXAT: 유닉스 시간을 사용하여 유효시간 설정


### 리스트형

- LPUSH: 왼쪽에 값 넣기
- LRANGE: 지정한 숫자만큼 값 출력
- **보통 뉴스 토픽 같은 자주 접근해야하고 10개같이 고정된 값 등에 활용할 수 있음**

||시간복잡도|효과|
|----|----|---|
|LPOP|O(N)|리스트에서 n만큼 값을 가져오고 뺌.(왼쪽)
|LPUSH|O(N)|n만큼 값을 넣음
|RPOP|O(N)|리스트에서 n만큼 값을 가져오고 뺌.(오른쪽)
|RPUSH|O(N)|n만큼 값을 넣음
|LMPOP|O(N*M)| 리스트의 왼쪽 또는 오른쪽부터 여러 개의 값을 가져오고 삭제하기
|BLMPOP|O(N*M)| LMPOP과 비슷, 블록(block)이란 개념이 등장
|LINDEX|O(N)| 리스트에서 지정한 인덱스값 조회
|LINSERT|O(N)| 리스트에 지정한 인덱스 앞,뒤에 값 추가
|LLEN|(1)| 리스트 길이 조회
|LRANGE|O(S*N)| 리스트 범위 조회, S는 시작점또는 끝점에서 가장 가까운 거리
|LREM|O(N*M)| 리스트에서 지정한 수를 특정 값만큼 삭제
|LSET|O(N)| 특정 인덱스를 특정 값으로 수정
|LTRIM|O(1)| 지정한 범위의 인덱스의 리스트로 재갱신
|LPOS|O(N)| 지정한 탐색요소값의 인덱스를 반환

이 외, 리스트가 존재시에만 값넣기, 리스트 간 요소 옮기기, 블록기능이 있는 LPOP, RPOP 등이 있다.

### Hash형

- 하나의 해시에 저장할 수 있는 필드 갯수는 약 43억(메모리 여유가 있으면 사실상 무제한)
- 해시 각 필드는 별도 TTL 설정 불가능

||시간복잡도|효과|
|----|----|---|
|HDEL|O(N)| 지정한 필드 삭제
|HEXISTS|O(1)| 지정한 필드 존재 확인
|HGET|O(1)| 지정한 필드 값 가져오기
|HGETALL|O(N)|해시에 포함된 모든 쌍 가져옴.
|HKEYS|O(N)|해시에 저장된 모든 필드 가져옴.
|HLEN|O(1)|해시에 포함된 필드 수 가져오기
|HMSET|O(N)|필드에 값 저장. 덮어씌기 기능
|HSET|O(N)| Redis 4.0이후에는 HMSET과 같은 기능
|HVALS|O(N)|해시 필드의 모든 필드값 반환
|HSCAN|O(1)| 해시의 필드 집함을 반복 처리하여 필드 쌍 목록 반환

- 필드의 값이 숫자인 경우 `HINCRBY`, `HINCRBYFLOAT` 명령어로 값 증가 가능(O(1))
  

- HDEL, HKEYS같은 명령어는 필드 갯수에 비례하여 시간이 듦. SCAN을 사용하거나 설계를 다시 하는것도 고려해야함.
