
내용없음


## 후기


이 장도 처음부터 좀 실망했다.

전체적인 내용은 php, python, ruby등의 언어로 Redis를 붙혀서 여러 애플리케이션을 개발하는 것이였는데, 이런 구현법은 궁금하지 않았다.

그래도 그런 과정중에 얻어갈게 있지 않을까하고 봤다.

그나마 든 생각은

채팅 구현할때 Redis-Stream + fastAPI조합을 사용하였는데,

fastAPI를 사용한 것을 보고 나름 최신의 책이구나? 싶었고

채팅 구현할때 Redis pub/sub 또는 RabbitMQ같은 메시지큐만 생각하였는데 Redis-Stream으로 구현한걸 보며, 뭐가 장점이고 뭐를 고려해야할까? 등의 생각을 하게 되었다.

## 🥊 RabbitMQ vs Redis Stream (Pub/Sub 용도 한정)

| 항목               | RabbitMQ (Fanout Exchange)         | Redis Stream                             |
|--------------------|------------------------------------|------------------------------------------|
| 메시지 보존        | ✅ Queue에 메시지 저장됨           | ✅ Stream에 메시지 저장됨                |
| 구독자 관리        | ✅ 각 Queue로 분기됨 (독립적 소비) | ✅ Consumer Group으로 오프셋 기반 관리    |
| 지연 소비 가능     | ✅ 가능                             | ✅ 가능                                   |
| 복구 가능성        | ✅ 소비 중단 후 메시지 재소비 가능 | ✅ 오프셋 기반으로 재소비 가능           |
| 메시지 삭제 시점   | Queue TTL 또는 ACK 기반 삭제       | 수동 `XTRIM` 또는 최대길이 설정          |
| ACK 처리           | ✅ 기본 지원                        | ✅ `XACK` 명령 필요                       |
| 지속성             | ✅ durable queue 설정 필요          | ✅ 디스크 기반 지속성                    |
| 클러스터 지원      | ✅ 안정적                           | ⚠️ 클러스터 운영시 복잡도 증가           |
| 성능               | 빠름                                | 매우 빠름 (단일 노드 기준)              |
| 운영 복잡도        | AMQP 개념 필요 / 관리툴 풍부       | 간단함 (Redis만 운영)                    |

## ✅ 선택 기준 요약

| 조건                                      | 추천                |
|-------------------------------------------|---------------------|
| 고성능 + 메시지 누락 없이 소비             | ✅ Redis Stream     |
| 구독자/큐별 독립적인 처리 원함            | ✅ RabbitMQ         |
| MQ 운영 경험 있고 복잡한 라우팅 필요       | ✅ RabbitMQ         |
| Redis 기반 + Pub/Sub + MQ 융합하고 싶음   | ✅ Redis Stream     |
| 메시지를 특정 그룹이 정확히 한 번 처리해야 | ✅ Redis Stream     |
| 다양한 라우팅 정책 활용하고 싶음          | ✅ RabbitMQ         |


Redis Stream으로 채팅 만들기는 하나의 과제로 내가 언젠가 수행하지 않을까한다.