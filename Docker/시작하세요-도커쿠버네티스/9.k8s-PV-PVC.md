# 퍼시스턴트 볼륨(PV)과 퍼시스턴트 볼륨 클레임(PVC)

디플로이먼트가 상태를 가지려면 어떻게 해야할까?
지금까지 했던 방식으로 MySQL 포드를 생성한다해도 그 안에 저장된 데이터는 영속적이지 않다.
즉, 도커에서 볼륨과 비슷한 기능이 k8s에도 필요하다.

하지만 여러 개의 서버로 구성된 쿠버네티스와 같은 클러스터 환경에서는 이 방법이 적합하지 않을 수 있다.

왜냐하면 특정 노드에서만 데이터를 보관해 저장하면 포드가 다른 노드로 옮겨갔을 때 해당 데이터를 사용할 수 없게 된다.

이를 해결할 수 있는 일반적인 방법은 어느 노드에서도 접근해 사용할 수 있는 퍼시스턴트 볼륨(Persistent Volume)을 사용하는 것이다.

퍼시스턴트 볼륨에는 AWS의 EBS, 또는 NFS, Ceph, GlusterFs등이 존재한다.

## 로컬 볼륨 

볼륨을 간단히 사용해 볼 수 있는 hostPath, emptyDir 두 가지 종류의 볼륨이 있다.
- hostPath: 호스트와 볼륨을 공유
- emptyDir: 포드의 컨테이너 간에 볼륨을 공유하기 위해 사용

주로 사용되는 볼륨 종류는 아님.

- hostPath는 디플로이먼트의 포드에 장애가 생겨 다른 노드로 옮겨갔을 경우, 이전 노드에 저장된 데이터를 사용할 수 없다는 단점이 있다. 하지만 모든 노드에 hostPath를 배치해야하는 특수항 포드의 경우 유용하게 사용이 가능. 

- emptyDir은 포드가 실행되는 도중에만 필요한 휘발성 데이터를 각 컨테이너가 함께 사용할 수 있도록 임시저장 공간을 생성. 포드가 삭제되면 emptyDir에 있던 데이터도 삭제됨. 책에서 설명하는 사용 예제로는 한 컨테이너가 파일을 관리하고 한 컨테이너가 그 파일을 사용하는 경우에 유용하게 사용할 수 있음. 웹 서버 컨테이너가 있고 정적 파일만 전달해주는 사이드카용 컨테이너가 있을 경우 등에 대하여 사용이 가능함.

## 네트워크 볼륨




