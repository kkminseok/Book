# 인그레스(Ingress)

외부에서 내부로 향하는 것을 지칭하는 단어

- 인그레스 트래픽: 외부에서 내부로 유입되는 트래픽
- 인그레스 네트워크: 인그레스가 트래픽을 처리하기 위한 네트워크

### 주요 기능
- 외부 요청의 라우팅: 특정 api경로로 들어온 요청에 대하여 어떠한 서비스로 전달할 지 결정 가능
- 가상 호스트 기반의 요청 처리: 같은 IP에 대해 다른 도메인의 이름으로 요청이 도착했을때 어떻게 처리할 지 정의 가능
- SSL/TTS 보안 연결처리: 여러개의 서비스 요청을 라우팅할 떄, 보안연결을 위한 인증서 적용을 쉽게 할 수 있음.

인그레스는 NodePort, LoadBalancer로 대체는 가능하다. 

### 쓰는 이유

그렇지만 인그레스가 서비스의 네트워크 부분과 비교되는 부분은 관리 포인트에 있다.

디플로이먼트가 3개라면 서비스도 3개로 만들어서 각각 관리해줘야하는데, 인그레스라는 하나의 진입점에서 TLS, 라우팅 등의 관리가 된다는 것이다.

또한 외부 요청에 대한 처리 규칙을 쿠버네티스 자체의 기능으로 편리하게 관리가 가능하다는 장점이 있다.

### 동작원리

- 실제 인그레스는 인그레스.yaml로 생성한다고해서 작동되지는 않음.
    - **인그레스 컨트롤러**라는 특수한 서버에 규칙을 적용해야함. 인그레스 컨트롤러가 해당 규칙을 로드해서 사용한다. 
    - 따라서 인그레스는 인그레스 컨트롤러와 반드시 같이 사용되어야함.
    - 인그레스 컨트롤러에는 보통 많이 사용하는 것이 Nginx IngressController, Kong Gateway등이 있다.
    
