## 클라우드 네이티브 애플리케이션 기초

클라우드 서비스를 제공할 때 유념해야할 다섯 가지 주요 항목
- 운영 효율성
  - 모든 것을 자동화하기
  - 모든 것을 모니터링하기
  - 모든 것을 문서화하기
  - 변화는 점진적으로
  - 장애 대비하기
- 보안
  - 소스코드
  - 컨테이너 이미지
  - 컨테이너 저장소(RBAC활용)
  - 파드
  - 클러스터와 오케스트레이터
- 신뢰와 가용성
- 확장성과 비용
- 함수 vs 서비스
  - 함수형 서비스로 갈지? 일반적인 서비스로 갈지에 대한 얘기
  - 단기간 실행, 상호작용할 필요없는 단순 병렬 실행 시나리오(레코드 업데이트, 맵리듀스 함수, 배치 처리 등)
- API설계시 고려해야할 것들
  - 하위호환성을 지니고 있어야함. 
    - 기존 필드 이름을 변경하거나 삭제하지 말것
    - 더 이상 사용하지 않는다면 deprecated를 표시할 것
    - 호환성 테스트를 진행해볼 것
  - 시맨틱 버저닝
    - 호환성이 깨지면 **메이저 버전을 올림**
    - 하위호환되는 기능을 추가했을 때에는 마이너 버전을 올림.
  - 프로토콜
    - HTTP가 정답은 아니다. 무거운 부분도 있다. 웹소켓, HTTP2, gRPC 사용을 고려해보자.
    - 메시징 프로토콜은 대표적으로 MQTT, AMQP가 있음. 
      - MQTT: 주로 IOT와 기계끼리의 통신에 사용되는 바이너리 프로토콜 초경량
      - AMQP: 큐, 토픽기반 프로토콜 빠르지는 않지만 신뢰성이 높고 벤더간의 상호운용성 떄문
  - 요청과 응답
    - 비동기에서는 요청에 맞는 응답을 받을 수 있도록 요청큐, 응답큐를 둬서 관리하는 방법도 있음.
  - 발행자와 구독자
    - pub/sub과 메시지큐의 차이? 메시지큐는 각 메시지를 하나의 컨슈머가 오직 한 번 처리, pub/sub은 여러 개의 수신자가 하나의 토픽을 구독해서 메시지 처리
  - 요청 응답, pub/sub 차이는 요청응답은 단단히 결합되어 만약 뒷단에서 장애가나면 클라이언트에게 장애 알림을 도달할 때까지 시간이 걸린다는 것. 
    - 클라우드 네이티브 환경에서는 이벤트와 큐 기반의 비동기 메시징이 대세

## 게이트웨이

게이트웨이의 역할
- 라우팅
- 애그리게이션
  - 요청에 응답을 각각 받아 취합해 처리하는 곳. 부하가 있을 수 있으니 추천하지는 않음.
- 오프로딩
  - SSL인증서 처리, 인증 권한, 비율 제한, 재시도 정책, 캐시, 압축 등


## 총평

내용이 전체적으로 쉽지는않다. 용어들이 너무 많이 나와서 그런것 같은데.. 잘 정리해야할 것 같다.