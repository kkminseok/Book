면접을 진행할 때 유의해야할? 또는 인지해야할 몇 가지 항목에 대해 다룬 내용

- QPS와 같은 기능적 요구사항, 비기능적 요구사항을 명확히 구분하자
- 모든 것은 트레이드 오프
- 면접을 주도한다. 면접관의 관심을 계속 유지. 멵버관이 원하는 것을 논의
- 로깅, 모니터링, 경보, 감사를 논의한다.
- 테스트와 유지보수성에 대해 논의하자.
- 전체 시스템과 모든 구성 요소의 성능 저하와 실패를 고려하고 논의
- 시스템 다이어그램, 순서도, 시퀸스 다이어그램을 그린다. 이는 시각적 보조 자료로 사용한다.
- 시스템은 항상 개선될 수 있음을 인지하자.

시스템 면접을 진행할 때 참석자가 진행해야할 대강적인 프로세스 목록이다. 무조건 이대로 따라하는건 아니다.

1. 요구사항을 명확히 물어보고, 트레이드 오프를 논의한다.
    - 누가 이 시스템을 사용하는가? 핵심 고객이 누구인가?
    - 국제화 해야하는가?
    - 사용자 역할이 무엇인가
2. API 명세 작성
3. 데이터 모델 설계논의
    - 다른 서비스들끼리 데이터베이스를 공유하는 것은 안티패턴이다.
4. 실패 설계, 성능 저하, 모니터링, 경보 등을 논의한다. 병목 현상, SPOF, 고가용성 등도 논의한다.
5. 비용 등에 대한 논의한다.

-----

### 두 사용자가 동시에 업데이트할 경우 막는 방법

책에서 설명하는 방법 중 하나는 컬럼에 unix_locked와 같은 타임스탬프를 둬서 사용자가 편집할 떄 이 값을 수정하여 막는다는 것이다.

사용자1은 업데이트를 할 때 테이블에 저장된 unix_locked를 가져오고 업데이트를 진행하기 시작할 떄 해당 컬럼을 현재 시각으로 업데이트한다.
만약 사용자2가 unix_locked를 가져오고 업데이트를 할 떄 unix_locked이 테이블에 존재하던 값과 다르면 이미 업데이트 중이라는 것이므로 업데이트를 막는다.
사용자1의 작업이 끝나면 테이블에 저장된 unix_locked를 삭제한다 

-----

### 검색창에 대하여

검색을 구현하는 일반적인 기법은 다음과 같다.

- SQL문의 `LIKE` 연산자와 패턴 매칭을 사용해 검색.
    - 이는 임시로 사용하는게 좋다. 검색 쿼리를 사용자 정의하기 어렵고, 퍼지 검색/어간 추출/토큰화 같은 정교한 기능이 부족하다.
- 사용자가 많지 않으면 `match-sorter`와 같은 자바스크립트 라이브러리 사용.
- `ElaistcSearch`와 같은 검색 엔진 사용.


-----

면접 막바지에 다다르면 '새로운 요구사항 제안', '확장성과 성능에 대한 논의', '지연 시간과 처리량에 대한 논의' 등이 있을 수 있다.

- 새로운 요구사항 제안
    - 어떤 시스템에 어떤 기능이 추가 된다면 어떻게 할 것인가?
- 확장성과 성능에 대한 논의
    - 사용자가 백만 명인 경우 어떻게 빠른 응답시간을 줄 것인가?
    - 지난 10년간의 판매 데이터의 정확한 감사(Audit)을 수행한다면 어떻게 해야하는가?
- 지연 시간과 처리량
    - 메시지 전송 시간이 500ms 이내여야 한다면 어떻게 할 것인가?
    - 실시간 스트리밍을 지원하지 않는 현재 서비스에서 실시간 스트리밍을 지원한다면 어떻게 할 것인가?
- 비용
    - 필요할 때 서비스를 어떻게 점진적으로 해체할 수 있을까?
    - 갑자기 클라우드로 애플리케이션을 이식한다면 어떻게할 수 있는가? 트레이드 오프는 무엇인가?
- 가용성과 내결함성
    - 시스템의 각 구성 요소가 어떻게 실패할 수 있을까? 실패를 어떻게 방지할 수 있는가?

-----

면접 이후 회고록 작성은 필수이다.

**예비 관리자의 기술적 배경을 특히 비판적으로 평가해야한다. 비기술적인 엔지니어링 관리자, 카리스마 있는 관리자는 받아들이지 말아야 한다.
보통 이런 경우 엔지니어링 프로세스의 대대적인 변화에 대해 좋은 결정을 내리거나 변화의 실행을 이끌 수 없다.**

## 총평

이번 장은 면접흐름에 대한 설명을 해줬다. 시스템 디자인 인터뷰는 구글에 검색해도 그 절차는 나름 자세히 나오므로 참고하면 좋을 것 같다.
이 책에서 나온 내용이랑 크게 다르진 않다. 물론 책이 좀 더 세부적인 건 있다. 마지막에 회사를 고르는 기준, 관리자를 파악하는 기준에 대해 논의한 것은 
책에서 잘 다루지 않는 내용이라 나름 신선해서 좋았다.




